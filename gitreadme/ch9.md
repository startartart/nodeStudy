# 애플리케이션 운영과 고성능 웹을 위한 Node.js

* 로그 관리 : 시스템을 운영할 때 발생하는 모든 데이터를 관리하는 '로그'를 관리하는 것은 매우 중요하다. Node.js의 `winston` 미들웨어를 사용하여 관리하는 것이 좋다.

* 메일링 서비스 : 애플리케이션 구축에 있어서 가장 필수적으로 구현해야 하는 기능 중 대표적인 것이 메일링 기능이다.
    * 회원가입 후 입력한 이메일 주소로 인증메일이 발송되고 사용자는 인증메일을 통해 회원가입 완료
    * 기업의 최신 정보를 담은 뉴스레터 정기 발송
    * 이벤트 참여 등록 여부 및 확정 이메일 발송

    * 이러한 시스템을 위해 가장 많이 사용되고 있는 `nodemailer`를 사용한다.
    
    * mailtrap 서비스 사용하기 : mailtrap 서비스는 실제로 이메일을 받는 사람 주소로 발송하지 않고, 정상적으로 보내지는지를 테스트할수 있는 가짜 SMTP 서버이다.
        > 실제로 받는 사람에게 이메일을 보내지 않고도 일반 텍스트 형식, HTML 형식, 첨부 파일 등 실제 이메일이 어떻게 보내질지를 모두 테스트할 수 있다.

* 작업 스케줄러 : 정해진 시간, 날짜, 간격으로 어떤 작업을 주기적으로 실행할 수 있도록 해주는 프로그램을 말한다.
    * 데이터 백업 : 정해진 주기로 데이터를 백업한다.
    * 정기 리포트 생성 : 매주 혹은 매월 데이터베이스의 데이터를 기준으로 리포트를 생성하여 담당자에게 이메일로 전송한다.
    * 일정 관리 : 등록된 일정에 맞춰서 알림을 보낸다.

    * Node.js에서는 `node-cron` 미들웨어가 대표적인 작업 스케줄러로 사용된다.

* 엑셀 파일 처리 : 엑셀 파일을 다루기 위한 모듈로 `exceljs`와 `xlsx`가 있다. 여기서는 좀 더 대중화된 `xlsx` 모듈을 사용하기로 한다.
    * `readFile({path})` 작성한 엑셀파일을 가져온다.
    * `Sheets[SheetNames[index]]` index 번째 시트를 가져온다.
    ```js
    const firstSheetJson = xlsx.utils.sheet_to_json(firstSheet); // 시트내용을 json 데이터로 변환한다.
    ```
    * 셀 객체는 오브젝트로 다양한 키에대한 값을 제공한다.
        * `v` : 원시값, `w` : 포맷이 적용된 텍스트, `t` : 셀 데이터 타입을 나타냄(`b` `e` `n` `d` `s` 등), `f` : 셀 수식, `r` : 서식있는 텍스트 등..

    * 엑셀 내용 수정 : 셀 오브젝트의 키를 이용해서 원하는 값으로 할당해서 변경하거나 새 셀을 할당해 추가한다.
        * `writeFile({readFile}, {path})` : 읽은 엑셀파일의 변경사항을 확인하고 새로운 엑셀 파일을 생성한다.

* 웹 소켓 : 하나의 TCP 접속에 전이중 통신 채널을 제공하는 컴퓨터 통신 프로토콜로 클라이언트와 서버 간의 양방향 통신을 가능하게 하며, 실시간 데이터전송을 할 수 있게 해준다.
    > 클라이언트와 서버 간 소켓 연결을 유지해서 언제든지 양방향 통신이 가능하도록 하는 기술이다.
    * 웹 소켓을 사용하면 클라이언트의 요청 없이도 서버측에서 클라이언트에게 데이터를 전송할 수 있다.
    * 일반적으로 웹 소켓을 채팅 프로그램으로 많이 사용하나, 실제 사용되는 기술은 지도, 대시보드, 실시간 지표를 제공하는 경우에 많이 사용된다.
        > 웹 소켓은 클라이언트와 서버 양쪽에서 구축해야 한다.

